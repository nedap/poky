commit 69ace2200106348a1b00d509a6a234337c104c17
Author: Nick Clifton <nickc@redhat.com>
Date:   Thu Dec 1 15:20:19 2016 +0000

    Fix seg fault attempting to unget an EOF character.
    
        PR gas/20898
        * app.c (do_scrub_chars): Do not attempt to unget EOF.

Upstream-Status: backport

CVE: CVE-2017-7223
Signed-off-by: Thiruvadi Rajaraman <trajaraman@mvista.com>

Index: git/gas/ChangeLog
===================================================================
--- git.orig/gas/ChangeLog	2017-09-04 12:42:08.941602299 +0530
+++ git/gas/ChangeLog	2017-09-04 12:48:28.863820763 +0530
@@ -1,3 +1,8 @@
+2016-12-01  Nick Clifton  <nickc@redhat.com>
+
+	PR gas/20898
+	* app.c (do_scrub_chars): Do not attempt to unget EOF.
+
 2016-08-05  Nick Clifton  <nickc@redhat.com>
 
 	PR gas/20364
Index: git/gas/app.c
===================================================================
--- git.orig/gas/app.c	2017-09-04 12:42:05.261580103 +0530
+++ git/gas/app.c	2017-09-04 12:47:19.923428673 +0530
@@ -1187,7 +1187,7 @@
 		  state = -2;
 		  break;
 		}
-	      else
+	      else if (ch2 != EOF)
 		{
 		  UNGET (ch2);
 		}
