From 919383ac718c2a3187ee2a9ad659daa22da26258 Mon Sep 17 00:00:00 2001
From: "Maciej W. Rozycki" <macro@imgtec.com>
Date: Wed, 12 Apr 2017 00:02:13 +0100
Subject: [PATCH] MIPS/readelf: Remove extraneous null GOT data check

Null data is handled gracefully throughout in MIPS GOT processing, with
addresses printed normally and unavailable data shown as `<unknown>' by
`print_mips_got_entry', and special processing code for GOT[1] doing an
explicit check.  Remove an unwanted null GOT data check then, introduced
with commit 592458412fb2 in the course of addressing PR binutils/12855.

	binutils/
	* readelf.c (process_mips_specific): Remove null GOT data check.

Upstream-Status: Backport
CVE: CVE-2017-9041 patch #1
VER: <= 2.28
Signed-off-by: Armin Kuster <akuster@mvista.com>

---
 binutils/ChangeLog | 4 ++++
 binutils/readelf.c | 3 +--
 2 files changed, 5 insertions(+), 2 deletions(-)

Index: git/binutils/readelf.c
===================================================================
--- git.orig/binutils/readelf.c
+++ git/binutils/readelf.c
@@ -14995,8 +14995,8 @@ process_mips_specific (FILE * file)
       data = (unsigned char *) get_data (NULL, file, offset,
                                          global_end - pltgot, 1,
 					 _("Global Offset Table data"));
-      if (data == NULL)
-	return 0;
+
+      /* PR 12855: Null data is handled gracefully throughout.  */
       data_end = data + (global_end - pltgot);
 
       printf (_("\nPrimary GOT:\n"));
Index: git/bfd/ChangeLog
===================================================================
--- git.orig/bfd/ChangeLog
+++ git/bfd/ChangeLog
@@ -1,3 +1,7 @@
+2017-04-25  Maciej W. Rozycki  <macro@imgtec.com>
+ 
+       * readelf.c (process_mips_specific): Remove null GOT data check.
+
 2017-04-13  Nick Clifton  <nickc@redhat.com>
  
        PR binutils/21379
