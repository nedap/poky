commit a76376df7c07e577a9515c3faa5dbd50bda5da07
Author: Paul Eggert <eggert@cs.ucla.edu>
Date:   Fri Oct 20 18:41:14 2017 +0200

    CVE-2017-15670: glob: Fix one-byte overflow [BZ #22320]
    
Upstream-Status: Backport

CVE: CVE-2017-15670
Signed-off-by: Thiruvadi Rajaraman <trajaraman@mvista.com>

Index: git/ChangeLog
===================================================================
--- git.orig/ChangeLog	2017-11-16 18:12:32.457928327 +0530
+++ git/ChangeLog	2017-11-16 18:18:24.423642908 +0530
@@ -1,3 +1,9 @@
+2017-10-20  Paul Eggert <eggert@cs.ucla.edu>
+
+       [BZ #22320]
+       CVE-2017-15670
+       * posix/glob.c (__glob): Fix one-byte overflow.
+
 2017-05-05  Florian Weimer  <fweimer@redhat.com>
 
 	[BZ #21461]
Index: git/posix/glob.c
===================================================================
--- git.orig/posix/glob.c	2017-11-16 18:12:14.833843602 +0530
+++ git/posix/glob.c	2017-11-16 18:16:39.511127432 +0530
@@ -856,7 +856,7 @@
 		  *p = '\0';
 		}
 	      else
-		*((char *) mempcpy (newp, dirname + 1, end_name - dirname))
+		*((char *) mempcpy (newp, dirname + 1, end_name - dirname - 1))
 		  = '\0';
 	      user_name = newp;
 	    }
